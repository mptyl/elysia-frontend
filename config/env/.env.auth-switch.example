# ==============================================================================
# SEZIONE AUTH di elysia-frontend/.env.local
# Copia queste righe nel tuo .env.local sul server, scegliendo la modalit√†.
#
# SWITCH RAPIDO:
#   Emulatore ‚Üí Entra ID:  seguire i passi in fondo al file.
#   Entra ID  ‚Üí Emulatore: invertire i passi.
# ==============================================================================


# ==============================================================================
# üü° MODALIT√Ä ATTIVA: EMULATORE LDAP (temporanea)
# ==============================================================================

NEXT_PUBLIC_AUTH_PROVIDER=emulator
AUTH_PROVIDER_MODE=emulator
NEXT_PUBLIC_OAUTH_REDIRECT_PATH=/auth/callback

# Entra emulator ‚Äî Docker interno ‚Üí proxy /entra sul browser
ENTRA_EMULATOR_INTERNAL_HOST=http://host.docker.internal:8029
NEXT_PUBLIC_ENTRA_EMULATOR_PUBLIC_BASE=/entra
ENTRA_INTERNAL_URL=http://127.0.0.1:8029

# Directory service: emulatore locale (nessuna autenticazione)
DIRECTORY_SERVICE_URL=http://host.docker.internal:8029
DIRECTORY_SERVICE_AUTH_MODE=none
# AZURE_TENANT_ID=                    # ‚Üê NON usato in modalit√† emulatore
# AZURE_CLIENT_ID=                    # ‚Üê NON usato in modalit√† emulatore
# AZURE_CLIENT_SECRET=                # ‚Üê NON usato in modalit√† emulatore


# ==============================================================================
# üîµ MODALIT√Ä FUTURA: ENTRA ID REALE (Microsoft)
# ==============================================================================
# Quando Entra ID sar√† disponibile, sostituire il blocco qui sopra con questo:
#
# NEXT_PUBLIC_AUTH_PROVIDER=entra
# # AUTH_PROVIDER_MODE=emulator       # ‚Üê rimuovere o commentare
# # NEXT_PUBLIC_OAUTH_REDIRECT_PATH=  # ‚Üê non necessario (default /auth/callback)
#
# # Commentare o rimuovere le 3 righe dell'emulatore:
# # ENTRA_EMULATOR_INTERNAL_HOST=...
# # NEXT_PUBLIC_ENTRA_EMULATOR_PUBLIC_BASE=...
# # ENTRA_INTERNAL_URL=...
#
# # Directory service: Microsoft Graph API
# DIRECTORY_SERVICE_URL=https://graph.microsoft.com
# DIRECTORY_SERVICE_AUTH_MODE=bearer
# AZURE_TENANT_ID=<tenant-id-from-azure-portal>
# AZURE_CLIENT_ID=<client-id-from-azure-portal>
# AZURE_CLIENT_SECRET=<client-secret-from-azure-portal>


# ==============================================================================
# PASSI PER LO SWITCH emulatore ‚Üí Entra ID
# ==============================================================================
# 1. In QUESTO file (.env.local sul server):
#    - Sostituire il blocco üü° con il blocco üîµ (decommentare le righe sopra)
#
# 2. In supabase-project/.env:
#    - Commentare le righe emulatore:
#        GOTRUE_EXTERNAL_AZURE_CLIENT_ID=test-app-123
#        GOTRUE_EXTERNAL_AZURE_SECRET=test-secret
#        GOTRUE_EXTERNAL_AZURE_URL=http://host.docker.internal:8029/common
#    - Decommentare le righe Entra ID reale:
#        GOTRUE_EXTERNAL_AZURE_CLIENT_ID=<client-id-from-azure-portal>
#        GOTRUE_EXTERNAL_AZURE_SECRET=<client-secret-from-azure-portal>
#        GOTRUE_EXTERNAL_AZURE_URL=https://login.microsoftonline.com/<tenant-id>
#
# 3. Riavviare Supabase Auth:
#        cd /opt/athena/supabase-project && docker compose restart auth
#
# 4. Rebuild e deploy frontend:
#        cd /opt/athena/elysia-frontend
#        npm run assemble
#        cp -r out/* /opt/athena/elysia/elysia/api/static/
#
# 5. Riavviare Elysia:
#        cd /opt/athena/elysia && source .venv/bin/activate
#        elysia start --port 8090
#
# 6. Fermare l'emulatore (non pi√π necessario):
#        cd /opt/athena/ldap-emulator && docker compose down
# ==============================================================================
